def excludeDirs = []
def projectDirs = ['common', 'dropwizard', 'spring']

tasks.register('clean') {
    projectDirs.each {
        if (!excludeDirs.contains(file(it).name)) {
            dependsOn gradle.includedBuild(file(it).getName()).task(':clean')
        }
    }
}

tasks.register('build') {
    projectDirs.each {
        if (!excludeDirs.contains(file(it).name)) {
            dependsOn gradle.includedBuild(file(it).getName()).task(':build')
        }
    }
}

